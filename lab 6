/*ЗАДАНИЕ 6
Создать текстовый файл с записями следующего вида:
Иванов Петр Сергеевич 1975
Сидоров Николай Андреевич 1981
….
Воробьянинов Ипполит Матвеевич 1978
Прочитать данные из этого файла и записать в другой только те строки, которые относятся к родившимся позднее 1980 года.*/


#include<stdio.h>
#include<string.h>

int main ()
{
  char str, line[256]; 
  int substr;
  int len;
  FILE *f1;
  f1 = fopen("lab6.txt", "wt");
  fprintf(f1, "Иванов Петр Сергеевич 1975\nСидоров Николай Андреевич 1981\nВоробьянинов Ипполит Матвеевич 1978\nИванов Петр Сергеевич 1975\nСидоров Николай Андреевич 1981\nВоробьянинов Ипполит Матвеевич 1978\nИванов Петр Сергеевич 1975\nСидоров Николай Андреевич 1981\nВоробьянинов Ипполит Матвеевич 1908");
  fclose(f1);
  f1 = fopen("lab6.txt", "rt");
    if(f1)
    {
        // пока не дойдем до конца, считываем 
        while((fgets(line, 256, f1)))
        {
            // printf("%s", line);
            for (int i = 0; i < strlen(line); i++)
            {
                len = strlen(line);
                // printf("%d chars\n\n ", len);
                substr = len-5;
                // // for (int i = 0; i < strlen(line); i++)
                str = fseek(f1, substr, SEEK_SET); 
                printf("%c", str);
                break;
            }
            
        }
        
    }
  fclose(f1);
      
    //   f1 = fopen("lab6666.txt", "wt");
    //   fprintf(f1, "%s", s);
      
    //   fclose(f1);
  return 0;
}






















#include<stdio.h>
#include<string.h>

int main ()
{
  char str, line[256]; 
  int len, year;
  FILE *f1;
  f1 = fopen("lab6.txt", "rt");
  fprintf(f1, "Иванов Петр Сергеевич 1975\nСидоров Николай Андреевич 1981\nВоробьянинов Ипполит Матвеевич 1978\nИванов Петр Сергеевич 1975\nСидоров Николай Андреевич 1981\nВоробьянинов Ипполит Матвеевич 1978\nИванов Петр Сергеевич 1975\nСидоров Николай Андреевич 1981\nВоробьянинов Ипполит Матвеевич 1908");
  fclose(f1);
  f1 = fopen ("lab6.txt", "wt");
  while (fgets(line, 256, f1))
    {
        if (sscanf(line, "%[^0-9]%d", line, &year) == 1)
        {
            if (year >= 1980)
            {
                fprintf(stdout, "%s %d\n", line, year);
            }
        }
    }
    fclose(f1);
      
    //   f1 = fopen("lab6666.txt", "wt");
    //   fprintf(f1, "%s", s);
      
    //   fclose(f1);
  return 0;
}
