/*ЗАДАНИЕ 6
Создать текстовый файл с записями следующего вида:
Иванов Петр Сергеевич 1975
Сидоров Николай Андреевич 1981
….
Воробьянинов Ипполит Матвеевич 1978
Прочитать данные из этого файла и записать в другой только те строки, которые относятся к родившимся позднее 1980 года.*/


#include<stdio.h>
#include<stdlib.h>
#include<string.h>

int main ()
{
    char line[256], x[30];
    int i, result;
    FILE *f1;
    FILE *f2 = fopen("add_file.txt", "wt");;
    f1 = fopen("lab6.txt", "wt");
    fprintf(f1, "Иванов Петр Сергеевич 1975\nСидоров Николай Андреевич 1982\nВоробьянинов Ипполит Матвеевич 1988\nИванов Петр Сергеевич 1975\nСидоров Николай Андреевич 1981\nВоробьянинов Ипполит Матвеевич 1978\nИванов Петр Сергеевич 1986\nСидоров Николай Андреевич 1981\nВоробьянинов Ипполит Матвеевич 1908");
    fclose(f1);
  
    f1 = fopen("lab6.txt", "rt");
    while (fgets(line, 256, f1)) 
    {
        int len = strlen(line);
        if (len > 0 && line[len - 1] == '\n')
        {
            len--;
            result = atoi(&line[len - 5]); 
            if (result >= 1981)
            {
                snprintf (x, 30, "%d", result);
                fprintf(f2, "%s\n", x);// записываем строку в файл f2
                printf("%s\n", x);
            }
        }
    }
    fclose(f1);
    fclose(f2);
return 0;
}
